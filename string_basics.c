#include <stdio.h>
#include <string.h>

/*
========================================
string.h の基本的な使い方
========================================
文字列を扱うときに必要な関数が入っています
*/

int main() {
    printf("=== string.h の基本 ===\n\n");
    
    // ========================================
    // 1. strcpy - 文字列をコピーする
    // ========================================
    printf("--- 1. strcpy（文字列のコピー） ---\n");
    
    char str1[50];
    strcpy(str1, "こんにちは");  // str1に"こんにちは"をコピー
    
    printf("str1 = %s\n\n", str1);
    
    // 使い方: strcpy(コピー先, コピー元);
    // 注意: = では文字列をコピーできない！
    
    // ========================================
    // 2. strcmp - 文字列を比較する
    // ========================================
    printf("--- 2. strcmp（文字列の比較） ---\n");
    
    char word1[50] = "りんご";
    char word2[50] = "りんご";
    char word3[50] = "バナナ";
    
    // strcmp(文字列1, 文字列2) の戻り値:
    // 0  → 同じ
    // 0以外 → 違う
    
    if(strcmp(word1, word2) == 0) {
        printf("word1とword2は同じです\n");
    } else {
        printf("word1とword2は違います\n");
    }
    
    if(strcmp(word1, word3) == 0) {
        printf("word1とword3は同じです\n");
    } else {
        printf("word1とword3は違います\n");
    }
    
    printf("\n");
    
    // 注意: == では文字列を比較できない！
    // if(word1 == word2) ← これは間違い！
    
    // ========================================
    // 3. strlen - 文字列の長さを調べる
    // ========================================
    printf("--- 3. strlen（文字列の長さ） ---\n");
    
    char text[50] = "Hello";
    int length = strlen(text);
    
    printf("文字列: %s\n", text);
    printf("長さ: %d文字\n\n", length);
    
    // 使い方: strlen(文字列)
    // 戻り値: 文字数（終端の\0は含まない）
    
    // ========================================
    // 4. strcat - 文字列を連結する
    // ========================================
    printf("--- 4. strcat（文字列の連結） ---\n");
    
    char greeting[50] = "こんにちは";
    strcat(greeting, "、世界！");  // greetingの後ろに追加
    
    printf("結果: %s\n\n", greeting);
    
    // 使い方: strcat(追加される文字列, 追加する文字列);
    // 注意: 追加される側の配列は十分な大きさが必要
    
    // ========================================
    // 実践例: 構造体と組み合わせる
    // ========================================
    printf("--- 実践例: 構造体と組み合わせる ---\n");
    
    struct Person {
        char name[50];
        int age;
    };
    
    struct Person people[3] = {
        {"太郎", 20},
        {"花子", 22},
        {"次郎", 19}
    };
    
    // 名前で検索
    char searchName[50] = "花子";
    
    printf("「%s」を探しています...\n", searchName);
    
    for(int i = 0; i < 3; i++) {
        if(strcmp(people[i].name, searchName) == 0) {
            printf("見つかりました！ %s（%d歳）\n", people[i].name, people[i].age);
        }
    }
    
    printf("\n");
    
    // ========================================
    // まとめ
    // ========================================
    printf("========================================\n");
    printf("まとめ:\n");
    printf("1. strcpy(先, 元) - 文字列をコピー\n");
    printf("2. strcmp(str1, str2) - 比較（0なら同じ）\n");
    printf("3. strlen(str) - 文字列の長さ\n");
    printf("4. strcat(先, 追加) - 文字列を連結\n");
    printf("\n");
    printf("重要: 文字列は == や = で比較・代入できない！\n");
    printf("========================================\n");
    
    return 0;
}

/*
========================================
よくある間違い:
========================================

❌ 間違い:
char str[50];
str = "こんにちは";  // エラー！

✅ 正しい:
char str[50];
strcpy(str, "こんにちは");

---

❌ 間違い:
if(str1 == str2) {  // 正しく比較できない
    ...
}

✅ 正しい:
if(strcmp(str1, str2) == 0) {
    ...
}

========================================
覚え方:
========================================
- strcpy: string copy（文字列コピー）
- strcmp: string compare（文字列比較）
- strlen: string length（文字列の長さ）
- strcat: string concatenate（文字列連結）
*/
