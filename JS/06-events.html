<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>06: イベント処理 - JavaScript学習</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 { color: #2c3e50; }
        h2 { color: #3498db; }
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        pre {
            background: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .exercise {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover { background: #2980b9; }
        .demo-box {
            border: 2px solid #3498db;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            background: #ecf0f1;
        }
        input, textarea {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        .clickable-box {
            padding: 20px;
            background: #3498db;
            color: white;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
            user-select: none;
        }
        .highlight {
            background: #e8f5e9;
            padding: 10px;
            border-left: 4px solid #4caf50;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>📚 Lesson 06: イベント処理</h1>

    <div class="section">
        <h2>🎯 イベントとは？</h2>
        <p>イベントは、ユーザーの操作（クリック、入力など）やブラウザの動作（ページ読み込みなど）に反応して実行される仕組みです。</p>
        
        <div class="highlight">
            <strong>💡 C言語との違い：</strong><br>
            C言語では順次実行が基本ですが、JavaScriptではイベント駆動型プログラミングが可能です。
        </div>
    </div>

    <div class="section">
        <h2>🖱️ イベントリスナーの登録</h2>
        
        <h3>方法1: addEventListener（推奨）</h3>
        <pre>const button = document.getElementById("myButton");

button.addEventListener("click", function() {
    console.log("ボタンがクリックされました");
});

// アロー関数でも書ける
button.addEventListener("click", () => {
    console.log("クリック！");
});</pre>

        <h3>方法2: HTML属性（非推奨）</h3>
        <pre>&lt;button onclick="handleClick()"&gt;クリック&lt;/button&gt;

function handleClick() {
    console.log("クリックされました");
}</pre>

        <div class="demo-box">
            <button id="demo-button">クリックしてみて</button>
            <p id="demo-output"></p>
        </div>
    </div>

    <div class="section">
        <h2>📋 主なイベントの種類</h2>
        
        <h3>マウスイベント</h3>
        <pre>element.addEventListener("click", () => {});      // クリック
element.addEventListener("dblclick", () => {});   // ダブルクリック
element.addEventListener("mouseenter", () => {}); // マウスが要素に入る
element.addEventListener("mouseleave", () => {}); // マウスが要素から出る
element.addEventListener("mousemove", () => {});  // マウス移動</pre>

        <h3>キーボードイベント</h3>
        <pre>element.addEventListener("keydown", () => {});  // キーを押した
element.addEventListener("keyup", () => {});    // キーを離した
element.addEventListener("keypress", () => {}); // キーを押した（非推奨）</pre>

        <h3>フォームイベント</h3>
        <pre>element.addEventListener("input", () => {});   // 入力値が変更
element.addEventListener("change", () => {});  // 値が確定
element.addEventListener("submit", () => {});  // フォーム送信
element.addEventListener("focus", () => {});   // フォーカス取得
element.addEventListener("blur", () => {});    // フォーカス喪失</pre>
    </div>

    <div class="section">
        <h2>📦 イベントオブジェクト</h2>
        <p>イベントハンドラには、イベントに関する情報を持つオブジェクトが渡されます。</p>
        
        <pre>button.addEventListener("click", (event) => {
    console.log(event.type);        // "click"
    console.log(event.target);      // クリックされた要素
    console.log(event.clientX);     // マウスのX座標
    console.log(event.clientY);     // マウスのY座標
});

input.addEventListener("keydown", (event) => {
    console.log(event.key);         // 押されたキー
    console.log(event.code);        // キーコード
    
    if (event.key === "Enter") {
        console.log("Enterキーが押されました");
    }
});</pre>

        <div class="demo-box">
            <div class="clickable-box" id="click-demo">
                ここをクリック
            </div>
            <p id="click-info"></p>
        </div>
    </div>

    <div class="section">
        <h2>⌨️ 入力イベント</h2>
        
        <pre>const input = document.getElementById("myInput");

// リアルタイムで入力を監視
input.addEventListener("input", (event) => {
    console.log("現在の値:", event.target.value);
});

// 入力が確定したとき（フォーカスが外れたとき）
input.addEventListener("change", (event) => {
    console.log("確定した値:", event.target.value);
});</pre>

        <div class="demo-box">
            <input type="text" id="demo-input" placeholder="何か入力してください">
            <p id="input-output"></p>
        </div>
    </div>

    <div class="section">
        <h2>🚫 イベントのデフォルト動作を防ぐ</h2>
        
        <pre>// フォームの送信を防ぐ
form.addEventListener("submit", (event) => {
    event.preventDefault();
    console.log("送信をキャンセルしました");
});

// リンクの遷移を防ぐ
link.addEventListener("click", (event) => {
    event.preventDefault();
    console.log("リンクをクリックしましたが遷移しません");
});</pre>
    </div>

    <div class="section exercise">
        <h2>💪 課題1: クリックカウンター</h2>
        <p><strong>要件：</strong></p>
        <ol>
            <li>ボタンをクリックした回数をカウント</li>
            <li>クリック回数を表示</li>
            <li>10回クリックしたら「おめでとう！」と表示</li>
            <li>リセットボタンでカウントを0に戻す</li>
        </ol>
        <div class="demo-box">
            <button id="ex1-button">クリック</button>
            <button id="ex1-reset">リセット</button>
            <p id="ex1-output">クリック回数: 0</p>
        </div>
    </div>

    <div class="section exercise">
        <h2>💪 課題2: リアルタイム文字数カウンター</h2>
        <p><strong>要件：</strong></p>
        <ol>
            <li>テキストエリアに入力された文字数をリアルタイムで表示</li>
            <li>文字数が100文字を超えたら警告メッセージを表示</li>
            <li>文字数が0の時は「文字を入力してください」と表示</li>
        </ol>
        <div class="demo-box">
            <textarea id="ex2-textarea" rows="4" cols="50" placeholder="ここに文字を入力"></textarea>
            <p id="ex2-output">文字数: 0</p>
        </div>
    </div>

    <div class="section exercise">
        <h2>💪 課題3: キーボードイベント</h2>
        <p><strong>要件：</strong></p>
        <ol>
            <li>入力欄でEnterキーを押すと、入力内容をリストに追加</li>
            <li>追加後、入力欄をクリア</li>
            <li>リストが空の場合は「まだ項目がありません」と表示</li>
            <li>各リスト項目に削除ボタンを付ける</li>
        </ol>
        <div class="demo-box">
            <input type="text" id="ex3-input" placeholder="項目を入力してEnter">
            <ul id="ex3-list"></ul>
        </div>
    </div>

    <div class="section exercise">
        <h2>💪 課題4: マウス座標トラッカー</h2>
        <p><strong>要件：</strong></p>
        <ol>
            <li>下のボックス内でマウスを動かすと、座標を表示</li>
            <li>クリックすると、その位置に小さな丸（●）を表示</li>
            <li>「クリア」ボタンですべての丸を削除</li>
        </ol>
        <div class="demo-box">
            <div id="ex4-tracker" style="height: 200px; background: #fff; position: relative; border: 1px solid #ccc;">
                マウスを動かしてクリックしてください
            </div>
            <p id="ex4-coords">X: 0, Y: 0</p>
            <button id="ex4-clear">クリア</button>
        </div>
    </div>

    <script>
        // デモ用のコード
        document.getElementById("demo-button").addEventListener("click", () => {
            document.getElementById("demo-output").textContent = "ボタンがクリックされました！";
        });

        document.getElementById("click-demo").addEventListener("click", (event) => {
            const info = `クリック位置: X=${event.clientX}, Y=${event.clientY}`;
            document.getElementById("click-info").textContent = info;
        });

        document.getElementById("demo-input").addEventListener("input", (event) => {
            document.getElementById("input-output").textContent = 
                `入力中: ${event.target.value} (${event.target.value.length}文字)`;
        });

        // ↓↓↓ ここから課題のコードを書く ↓↓↓

        // 課題1
        

        // 課題2
        

        // 課題3
        

        // 課題4
        

        // ↑↑↑ ここまで ↑↑↑
    </script>

    <div class="section">
        <h2>📌 まとめ</h2>
        <ul>
            <li>イベントリスナーで、ユーザーの操作に反応できる</li>
            <li><code>addEventListener</code>でイベントを登録（推奨）</li>
            <li>イベントオブジェクトから詳細情報を取得できる</li>
            <li>主なイベント: click, input, keydown, mouseenter など</li>
            <li><code>event.preventDefault()</code>でデフォルト動作を防げる</li>
            <li>イベント駆動型プログラミングでインタラクティブなUIを作成</li>
        </ul>
        <p><strong>次のレッスン：</strong> 07-final-project.html（総合演習）</p>
    </div>
</body>
</html>